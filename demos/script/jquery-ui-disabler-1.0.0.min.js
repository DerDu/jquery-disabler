(function(a,b){var c="hasDisabler";var d="disabler-ignore-readonly";var e="disabler-hide-readonly";var f="disabler-show-text-readonly";var g="panels-date-picker";var h="ui-state-disabled";var i="disabler-read-only-text";var j="disabler-read-only-remove-me";var k="disabler-read-only";var l="disabler-hidden-inputs";var m="disabler-anchor-href";var n="disabler-saved-events";var o="data-disabler-read-only-display";a.widget("dtg.disabler",{options:{disable:false,readonly:false,selectorExpression:"*:not(.disabler-ignore-readonly)",beforeDisable:function(a,b){return true},afterDisable:function(a,b){},beforeReadOnly:function(a,b){return true},readOnlyIteration:function(a,b){return true},turnReadOnlyOn:function(a,b){return true},turnReadOnlyOff:function(a,b){return true},showTextReadOnly:function(a,b){return true},undoShowTextReadOnly:function(a,b){return true},afterReadOnly:function(a,b){},processHiddenInputsReadOnly:function(a,b){},processHiddenInputsNotReadOnlyIteration:function(a,b){},disableEvents:function(a,b){},enableEvents:function(a,b){}},_create:function(){this._initOptions();if(this.options.disable){this._setOption("disable",this.options.disable)}if(this.options.readonly){this._setOption("readonly",this.options.readonly)}if(!this.element.hasClass(c)){this.element.addClass(c)}},_initOptions:function(){this.options.disable=this._ensureBoolean(this.options.disable);this.options.readonly=this._ensureBoolean(this.options.readonly)},_ensureBoolean:function(a){var b=false;if(this._isNotNullAndNotUndefined(a)){var c=(new String(a)).toLowerCase();b=c=="true"}return b},_setOption:function(a,b){this._initOptions();this.options[a]=b;var c=this.element.attr("id");switch(a){case"disable":this._doDisable(c,b);break;case"readonly":this.readOnly(c,this.options.readonly);break}},_getId:function(b){if(this._isNullOrUndefined(b)){b=this.element.attr("id")}if(this._isNotNullAndNotUndefined(b)){b=a.trim(b);if(b.length==0){b=null}}return b},enable:function(a){a=this._getId(a);if(this._isNullOrUndefined(a)){return}this._doDisable(a,false)},disable:function(a){a=this._getId(a);if(this._isNullOrUndefined(a)){return}this._doDisable(a,true)},_doDisable:function(a,b){var c=this._escape(a);var d=this._trigger("beforeDisable",null,{containerId:c,disabling:b,element:this.element});if(d){this._readOnlyForDisable(a,b);this.options.disable=b;this._trigger("afterDisable",null,{containerId:c,disabling:b,element:this.element});this.options.disable=b}},_readOnlyForDisable:function(a,b){a=this._getId(a);if(this._isNullOrUndefined(a)){return}b=this._defaultReadOnlyFlag(b);this._doReadOnly(a,b,true)},readOnly:function(a,b){a=this._getId(a);if(this._isNullOrUndefined(a)){return}b=this._defaultReadOnlyFlag(b);this._doReadOnly(a,b,false)},_defaultReadOnlyFlag:function(a){if(a==b){a=true}return a},_doReadOnly:function(c,d,f){var g=this._escape(c);var h=this._trigger("beforeReadOnly",null,{containerId:g,readOnlyFlag:d,disabling:f,element:this.element});if(!h||d==b){return}var j=[];var k=this._formatSelectorForContainerId(g);var l=a(k);if(l.length==0){return}this._doReadOnlyIteration(l,d,j,f);var m=this;var k=this.options.selectorExpression+", span."+i+", ."+e;l.find(k).each(function(c){var e=a(this);var h=m._trigger("readOnlyIteration",null,{input:e,index:c,containerId:g,readOnlyFlag:d,disabling:f,element:m.element});if(!h){return true}var i=e.data("disabler");if(i!=b){return true}m._doReadOnlyIteration(e,d,j,f)});this._processHiddenInputsOnReadOnly(g,d,j);this.options.readonly=d;this._trigger("afterReadOnly",null,{containerId:g,readOnlyFlag:d,disabling:f,element:this.element})},_whatTypeAmI:function(a){var c=a.attr("type");if(c==b){if(a[0]==b){c=""}else{c=a[0].tagName}}return c.toLowerCase()},_doReadOnlyIteration:function(a,b,c,d){if(b){this._turnReadOnlyOn(a,c,d)}else{this._turnReadOnlyOff(a)}},_turnReadOnlyOn:function(a,c,i){if(a.data(k)!=b){return}if(a.attr("readonly")!=b||a.attr("disabled")!=b){return}if((a.hasClass("hasDatepicker")||a.hasClass(g))&&a.datepicker("option","disabled")){return}a.data(k,true);if(a.hasClass(d)){return}var j=this._whatTypeAmI(a);if(!i){if(a.hasClass(e)){c.push(a);a.hide();return}if(a.hasClass(f)){this._showTextReadOnly(a,j);return}}var l=this._trigger("turnReadOnlyOn",null,a);if(!l){return}if(a.data("accordion")!=b){a.accordion("disable")}else if(a.data("progressbar")!=b){a.progressbar("disable")}else if(a.data("slider")!=b){a.slider("disable")}else if(a.data("spinner")!=b){a.spinner("disable")}else if(a.data("tabs")!=b){a.tabs("disable")}else if(a.data("menu")!=b){a.menu("disable")}else if(a.data("datapicker")||a.hasClass(g)){a.datepicker("disable")}else if(j=="a"){this._disableLink(a)}else if(j=="submit"||j=="button"||j=="label"){if(a.hasClass("ui-button")){a.button("disable")}else if(j=="label"){a.addClass(h)}else{a.attr("disabled","true")}}else if(j=="select"||j=="checkbox"||j=="radio"){this._disableEvents(a);a.attr("disabled","true")}else if(j=="text"||j=="textarea"){a.attr("readonly","readonly");a.attr("disabled","true")}else{this._disableEvents(a)}},_showTextReadOnly:function(c,d){var e=this._trigger("showTextReadOnly",null,c);if(!e){return}var f="";var g="";if(d=="a"){g=c.text()}else if(d=="text"||d=="textarea"){g=c.val()}else if(d=="radio"||d=="checkbox"){if(c.attr("checked")!=b){g=c.attr(o);if(g==b){g=c.val()}f=c.parent().attr(o);if(f!=b){g=f}}}else if(d=="select"){var h=[];c.find("option:selected").each(function(c){var d=a(this);var e=d.attr(o);if(e==b){e=d.text()}h.push(e)});g=h.join(", ")}c.wrap('<span class="'+i+'"></span>');c.parent("span."+i).data(k,true);var l="";if(a.trim(g).length==0){l='style="display: none; "'}c.parent().after('<span class="'+j+'" '+l+">"+g+"</span>");c.hide()},_turnReadOnlyOff:function(a){if(a.data(k)==b){return}a.removeData(k);if(a.hasClass(i)){var c=this._trigger("undoShowTextReadOnly",null,a);if(c){var d=a.next("span."+j);d.remove();var e=a.children();e.unwrap();e.show()}}else{var c=this._trigger("turnReadOnlyOff",null,a);if(c){var f=this._whatTypeAmI(a);if(a.data("accordion")!=b){a.accordion("enable")}else if(a.data("progressbar")!=b){a.progressbar("enable")}else if(a.data("slider")!=b){a.slider("enable")}else if(a.data("spinner")!=b){a.spinner("enable")}else if(a.data("tabs")!=b){a.tabs("enable")}else if(a.data("menu")!=b){a.menu("enable")}else if(a.data("datapicker")||a.hasClass(g)){a.datepicker("enable")}else if(f=="a"){this._enableLink(a)}else if(f=="submit"||f=="button"||f=="label"){if(a.hasClass("ui-button")){a.button("enable")}else if(f=="label"){a.removeClass(h)}else{a.removeAttr("disabled","true")}}else if(f=="select"||f=="checkbox"||f=="radio"){this._enableEvents(a);a.removeAttr("disabled")}else if(f=="text"||f=="textarea"){a.removeAttr("readonly");a.removeAttr("disabled")}else{this._enableLink(a)}}}},_processHiddenInputsOnReadOnly:function(c,d,e){var f=this._escapeValue(this.element.attr("id"));if(d){if(e.length>0){a("#"+f).data(l,e)}this._trigger("processHiddenInputsReadOnly",null,{containerId:f,hiddenInput:h,element:this.element})}else{e=a("#"+f).data(l);if(e!=b){for(var g=0;g<e.length;g++){var h=e[g];h.show();this._trigger("processHiddenInputsNotReadOnlyIteration",null,{containerId:f,hiddenInput:h,element:this.element})}a("#"+f).removeData(l)}}},_disableLink:function(a){this._disableEvents(a);var c=a.attr("href");if(c!=b){a.data(m,c);a.attr("href","#")}a.on("click",function(a){a.preventDefault()});a.addClass(h)},_disableEvents:function(c){var d=this._trigger("disableEvents",null,c);if(!d){return}var e=c.data("events");if(e!=b){var f=[];a.each(e,function(c,d){a.each(d,function(a){var e=d[a];if(e!=b){var g={eventName:c,handler:e};f.push(g)}})});c.data(n,f);c.unbind()}},_enableLink:function(a){a.unbind();this._enableEvents(a);var c=a.data(m);if(c!=b){a.attr("href",c);a.removeData(m)}a.removeClass(h)},_enableEvents:function(c){var d=this._trigger("enableEvents",null,c);if(!d){return}var e=c.data(n);if(e!=b){a.each(e,function(a){var b=e[a];var d=b.eventName;var f=b.handler;c.on(d,f)})}},_escape:function(a){if(a==b){a=this.element.attr("id")}return this._escapeValue(a)},_escapeValue:function(a){a=a.replace(/\+/g,"\\+");a=a.replace(/\\/g,"\\");a=a.replace(/\//g,"\\/");a=a.replace(/!/g,"\\!");a=a.replace(/"/g,'\\"');a=a.replace(/#/g,"\\#");a=a.replace(/\$/g,"\\$");a=a.replace(/%/g,"\\%");a=a.replace(/&/g,"\\&");a=a.replace(/'/g,"\\'");a=a.replace(/\(/g,"\\(");a=a.replace(/\)/g,"\\)");a=a.replace(/\*/g,"\\*");a=a.replace(/,/g,"\\,");a=a.replace(/\./g,"\\.");a=a.replace(/:/g,"\\:");a=a.replace(/;/g,"\\;");a=a.replace(/\?/g,"\\?");a=a.replace(/@/g,"\\@");a=a.replace(/\[/g,"\\[");a=a.replace(/\]/g,"\\]");a=a.replace(/\^/g,"\\^");a=a.replace(/`/g,"\\`");a=a.replace(/\{/g,"\\{");a=a.replace(/\}/g,"\\}");a=a.replace(/\|/g,"\\|");a=a.replace(/\~/g,"\\~");return a},_isNotNullAndNotUndefined:function(a){return a!=b&&a!=null},_isNullOrUndefined:function(a){return a==null||a==b},_formatSelectorForContainerId:function(a){var b=this._escapeValue(this.element.attr("id"));if(b==a){a=null}var c="#"+a+" ";if(this._isNullOrUndefined(a)){c=""}if(c==""){c="#"+b}else{c="#"+b+" "+c}return c+" "}});a.extend(a.dtg.disabler,{version:"1.0.0"})})(jQuery)