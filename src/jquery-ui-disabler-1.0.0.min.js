(function(e,t){var n="hasDisabler";var r="disabler-ignore-readonly";var i="disabler-hide-readonly";var s="disabler-show-text-readonly";var o="panels-date-picker";var u="ui-state-disabled";var a="disabler-read-only-text";var f="disabler-read-only-remove-me";var l="disabler-read-only";var c="disabler-hidden-inputs";var h="disabler-anchor-href";var p="disabler-saved-events";var d="data-disabler-read-only-display";e.widget("dtg.disabler",{options:{disable:false,readonly:false,expression:"*:not(.disabler-ignore-readonly)",beforeDisable:function(e,t){return true},afterDisable:function(e,t){},beforeReadOnly:function(e,t){return true},readOnlyIteration:function(e,t){return true},turnReadOnlyOn:function(e,t){return true},turnReadOnlyOff:function(e,t){return true},showTextReadOnly:function(e,t){return true},undoShowTextReadOnly:function(e,t){return true},afterReadOnly:function(e,t){},processHiddenInputsReadOnly:function(e,t){},processHiddenInputsNotReadOnlyIteration:function(e,t){},disableEvents:function(e,t){},enableEvents:function(e,t){}},_create:function(){this._initOptions();if(this.options.disable){this._setOption("disable",this.options.disable)}if(this.options.readonly){this._setOption("readonly",this.options.readonly)}if(!this.element.hasClass(n)){this.element.addClass(n)}},_initOptions:function(){this.options.disable=this._ensureBoolean(this.options.disable);this.options.readonly=this._ensureBoolean(this.options.readonly)},_ensureBoolean:function(e){var t=false;if(this._isNotNullAndNotUndefined(e)){var n=(new String(e)).toLowerCase();t=n=="true"}return t},_setOption:function(e,t){this._initOptions();this.options[e]=t;var n=this.element.attr("id");switch(e){case"disable":this._doDisable(n,t);break;case"readonly":this.readOnly(n,this.options.readonly);break}},_getId:function(t){if(this._isNullOrUndefined(t)){t=this.element.attr("id")}if(this._isNotNullAndNotUndefined(t)){t=e.trim(t);if(t.length==0){t=null}}return t},enable:function(e){e=this._getId(e);if(this._isNullOrUndefined(e)){return}this._doDisable(e,false)},disable:function(e){e=this._getId(e);if(this._isNullOrUndefined(e)){return}this._doDisable(e,true)},_doDisable:function(e,t){var n=this._escape(e);var r=this._trigger("beforeDisable",null,{containerId:n,disabling:t,element:this.element});if(r){this._readOnlyForDisable(e,t);this.options.disable=t;this._trigger("afterDisable",null,{containerId:n,disabling:t,element:this.element});this.options.disable=t}},_readOnlyForDisable:function(e,t){e=this._getId(e);if(this._isNullOrUndefined(e)){return}t=this._defaultReadOnlyFlag(t);this._doReadOnly(e,t,true)},readOnly:function(e,t){e=this._getId(e);if(this._isNullOrUndefined(e)){return}t=this._defaultReadOnlyFlag(t);this._doReadOnly(e,t,false)},_defaultReadOnlyFlag:function(e){if(e==t){e=true}return e},_doReadOnly:function(n,r,s){var o=this._escape(n);var u=this._trigger("beforeReadOnly",null,{containerId:o,readOnlyFlag:r,disabling:s,element:this.element});if(!u||r==t){return}var f=[];var l=this._formatSelectorForContainerId(o);var c=e(l);if(c.length==0){return}this._doReadOnlyIteration(c,r,f,s);var h=this;var l=this.options.expression+", span."+a+", ."+i;c.find(l).each(function(n){var i=e(this);var u=h._trigger("readOnlyIteration",null,{input:i,index:n,containerId:o,readOnlyFlag:r,disabling:s,element:h.element});if(!u){return true}var a=i.data("disabler");if(a!=t){return true}h._doReadOnlyIteration(i,r,f,s)});this._processHiddenInputsOnReadOnly(o,r,f);this.options.readonly=r;this._trigger("afterReadOnly",null,{containerId:o,readOnlyFlag:r,disabling:s,element:this.element})},_whatTypeAmI:function(e){var n=e.attr("type");if(n==t){if(e[0]==t){n=""}else{n=e[0].tagName}}return n.toLowerCase()},_doReadOnlyIteration:function(e,t,n,r){if(t){this._turnReadOnlyOn(e,n,r)}else{this._turnReadOnlyOff(e)}},_turnReadOnlyOn:function(e,n,a){if(e.data(l)!=t){return}if(e.attr("readonly")!=t||e.attr("disabled")!=t){return}if((e.hasClass("hasDatepicker")||e.hasClass(o))&&e.datepicker("option","disabled")){return}e.data(l,true);if(e.hasClass(r)){return}var f=this._whatTypeAmI(e);if(!a){if(e.hasClass(i)){this._disableEvents(e);n.push(e);e.hide();return}if(e.hasClass(s)){this._disableEvents(e);this._showTextReadOnly(e,f);return}}var c=this._trigger("turnReadOnlyOn",null,e);if(!c){return}if(e.data("accordion")!=t){e.accordion("disable")}else if(e.data("progressbar")!=t){e.progressbar("disable")}else if(e.data("slider")!=t){e.slider("disable")}else if(e.data("spinner")!=t){e.spinner("disable")}else if(e.data("tabs")!=t){e.tabs("disable")}else if(e.data("menu")!=t){e.menu("disable")}else if(e.data("datapicker")||e.hasClass(o)){e.datepicker("disable")}else if(f=="a"){this._disableLink(e)}else if(f=="submit"||f=="button"||f=="label"){if(e.hasClass("ui-button")){e.button("disable")}else if(f=="label"){e.addClass(u)}else{e.attr("disabled","true")}}else if(f=="select"||f=="checkbox"||f=="radio"){this._disableEvents(e);e.attr("disabled","true")}else if(f=="text"||f=="textarea"){e.attr("readonly","readonly");e.attr("disabled","true")}else{this._disableEvents(e)}},_showTextReadOnly:function(n,r){var i=this._trigger("showTextReadOnly",null,n);if(!i){return}var s=this;var o="";var u="";if(r=="a"){u=this._getTextForInput(n,n.text())}else if(r=="text"||r=="textarea"){u=this._getTextForInput(n,n.val())}else if(r=="radio"||r=="checkbox"){if(n.attr("checked")!=t){u=this._getTextForInput(n,n.val())}}else if(r=="select"){var c=[];n.find("option:selected").each(function(t){var n=e(this);var r=s._getTextForSelectOption(n);c.push(r)});u=c.join(", ")}n.wrap('<span class="'+a+'"></span>');n.parent("span."+a).data(l,true);var h="";if(e.trim(u).length==0){h='style="display: none; "'}n.parent().after('<span class="'+f+'" '+h+">"+u+"</span>");n.hide()},_getTextForInput:function(e,n){var r=e.attr(d);if(r==t){r=n}overrideText=e.parent().attr(d);if(overrideText!=t){r=overrideText}return r},_getTextForSelectOption:function(e){var n=e.attr(d);if(n==t){n=e.text()}return n},_turnReadOnlyOff:function(e){if(e.data(l)==t){return}e.removeData(l);if(e.hasClass(a)){var n=this._trigger("undoShowTextReadOnly",null,e);if(n){var r=e.next("span."+f);r.remove();var i=e.children();i.unwrap();this._enableEvents(i);i.show()}}else{var n=this._trigger("turnReadOnlyOff",null,e);if(n){var s=this._whatTypeAmI(e);if(e.data("accordion")!=t){e.accordion("enable")}else if(e.data("progressbar")!=t){e.progressbar("enable")}else if(e.data("slider")!=t){e.slider("enable")}else if(e.data("spinner")!=t){e.spinner("enable")}else if(e.data("tabs")!=t){e.tabs("enable")}else if(e.data("menu")!=t){e.menu("enable")}else if(e.data("datapicker")||e.hasClass(o)){e.datepicker("enable")}else if(s=="a"){this._enableLink(e)}else if(s=="submit"||s=="button"||s=="label"){if(e.hasClass("ui-button")){e.button("enable")}else if(s=="label"){e.removeClass(u)}else{e.removeAttr("disabled","true")}}else if(s=="select"||s=="checkbox"||s=="radio"){this._enableEvents(e);e.removeAttr("disabled")}else if(s=="text"||s=="textarea"){e.removeAttr("readonly");e.removeAttr("disabled")}else{this._enableEvents(e)}}}},_processHiddenInputsOnReadOnly:function(n,r,i){var s=this._escapeValue(this.element.attr("id"));if(r){if(i.length>0){e("#"+s).data(c,i)}this._trigger("processHiddenInputsReadOnly",null,{containerId:s,hiddenInput:u,element:this.element})}else{i=e("#"+s).data(c);if(i!=t){for(var o=0;o<i.length;o++){var u=i[o];this._enableEvents(u);u.show();this._trigger("processHiddenInputsNotReadOnlyIteration",null,{containerId:s,hiddenInput:u,element:this.element})}e("#"+s).removeData(c)}}},_disableLink:function(e){this._disableEvents(e);var n=e.attr("href");if(n!=t){e.data(h,n);e.attr("href","#")}e.on("click",function(e){e.preventDefault()});e.addClass(u)},_disableEvents:function(n){var r=this._trigger("disableEvents",null,n);if(!r){return}var i=n.data("events");if(i!=t){var s=[];e.each(i,function(n,r){e.each(r,function(e){var i=r[e];if(i!=t){var o={eventName:n,handler:i};s.push(o)}})});n.data(p,s);n.unbind()}},_enableLink:function(e){e.unbind();this._enableEvents(e);var n=e.data(h);if(n!=t){e.attr("href",n);e.removeData(h)}e.removeClass(u)},_enableEvents:function(n){var r=this._trigger("enableEvents",null,n);if(!r){return}var i=n.data(p);if(i!=t){e.each(i,function(e){var t=i[e];var r=t.eventName;var s=t.handler;n.on(r,s)})}},_escape:function(e){if(e==t){e=this.element.attr("id")}return this._escapeValue(e)},_escapeValue:function(e){e=e.replace(/\+/g,"\\+");e=e.replace(/\\/g,"\\");e=e.replace(/\//g,"\\/");e=e.replace(/!/g,"\\!");e=e.replace(/"/g,'\\"');e=e.replace(/#/g,"\\#");e=e.replace(/\$/g,"\\$");e=e.replace(/%/g,"\\%");e=e.replace(/&/g,"\\&");e=e.replace(/'/g,"\\'");e=e.replace(/\(/g,"\\(");e=e.replace(/\)/g,"\\)");e=e.replace(/\*/g,"\\*");e=e.replace(/,/g,"\\,");e=e.replace(/\./g,"\\.");e=e.replace(/:/g,"\\:");e=e.replace(/;/g,"\\;");e=e.replace(/\?/g,"\\?");e=e.replace(/@/g,"\\@");e=e.replace(/\[/g,"\\[");e=e.replace(/\]/g,"\\]");e=e.replace(/\^/g,"\\^");e=e.replace(/`/g,"\\`");e=e.replace(/\{/g,"\\{");e=e.replace(/\}/g,"\\}");e=e.replace(/\|/g,"\\|");e=e.replace(/\~/g,"\\~");return e},_isNotNullAndNotUndefined:function(e){return e!=t&&e!=null},_isNullOrUndefined:function(e){return e==null||e==t},_formatSelectorForContainerId:function(e){var t=this._escapeValue(this.element.attr("id"));if(t==e){e=null}var n="#"+e+" ";if(this._isNullOrUndefined(e)){n=""}if(n==""){n="#"+t}else{n="#"+t+" "+n}return n+" "}});e.extend(e.dtg.disabler,{version:"1.0.0"})})(jQuery)